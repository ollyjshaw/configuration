{
  "id" : "middlewareblogs",
  "description" : "List the most recent middleware blogs. Accepts the following parameters: 'size', 'from', 'query', 'project', 'tag', 'aggs'",
  "default" : {
    "sys_type" : "blogpost"
  },
  "template" : "{\n    \"fields\": [\n      \"sys_url_view\",\n      \"sys_title\",\n      \"sys_contributors\",\n      \"sys_description\",\n      \"sys_created\",\n      \"author\",\n      \"sys_project\",\n      \"sys_tags\",\n      \"sys_content_id\",\n      \"sys_content\",\n      \"avatar_link\"\n    ],\n    \"from\": {{#from}}{{from}}{{/from}}{{^from}}0{{/from}},\n    \"size\": {{#size}}{{size}}{{/size}}{{^size}}10{{/size}},\n    \"query\": {\n      \"filtered\": {\n        \"query\": {\n          {{#query}}\n          \"multi_match\": {\n            \"query\": \"{{query}}\",\n            \"fields\": [\n              \"sys_title^2.5\",\n              \"sys_description\",\n              \"sys_content_plaintext\",\n              \"_all\",\n              \"sys_project_name^0.5\",\n              \"sys_tags^0.5\",\n              \"sys_contributors.fulltext\",\n              \"comment_body\"\n            ]\n          }\n          {{/query}}\n          {{^query}}\n          \"match_all\": {}\n          {{/query}}\n        },\n        \"filter\": {\n          \"and\": [\n            {\n              \"not\": {\n                \"terms\": {\n                  \"sys_tags\": [\"feed_group_name_nonmiddleware\"]\n                }\n              }\n            },{\n              \"or\": [\n                {{#project}}\n                { \"term\": { \"sys_project\": \"{{.}}\" }},\n                {{/project}}\n                {}\n              ]\n            },{\n            \"or\": [\n                {{#tag}}\n                { \"term\": { \"sys_tags\": \"{{.}}\" }},\n                {{/tag}}\n                {}\n              ]\n            }\n          ]\n        }\n      }\n    },\n    \"sort\": [\n      { \"sys_created\": \"desc\" },\n      \"_score\"\n    ]\n    {{#aggs}},\n    \"aggs\": {\n      \"sys_project\": {\n        \"terms\": {\n          \"field\": \"sys_project\"\n        }\n      },\n      \"sys_tags\": {\n        \"terms\": {\n          \"field\": \"sys_tags\"\n        }\n      }\n    }\n   {{/aggs}}\n  }"
}